# Constants for the hardware modules that compose PASCAL
gantry:
  # communcation
  # serialid: "55838333932351108212" #LINUX ONLY hardware ID of gantry control board. Used to find correct COM port
  device_identifiers:
    vendorid: "1EAF" #WINDOWS ONLY can be determined by https://interworks.com/blog/ijahanshahi/2014/07/18/identify-vid-pid-usb-device/
    productid: "0004" #WINDOWS ONLY
    location: "1-13.4.4" #WINDOWS + GANTRY ONLY
  pollingrate: 0.05 #delay (seconds) between sending a command and reading a response
  timeout: 15 #max time (seconds) allotted to gantry motion before flagging a movement error

  # movement
  positiontolerance: 0.05 #tolerance (mm) for movements to be considered complete
  speed_max: 10000 #max gantry speed, mm/min
  speed_min: 500 #min gantry speed, mm/min
  zhop_height: 20 #vertical clearance (mm) to use when moving between two points. will move this amount above the highest z point
  idle_coordinates: [288,165,55.5] #coordinates to move the gantry to when idle, mainly to avoid cameras
  x_max: 797.0 #max x position (mm)
  x_min: 0     #min x position (mm)
  y_max: 165.0 #max y position (mm)
  y_min: 0     #min y position (mm)
  z_max: 136.0 #max z position (mm)
  z_min: 0     #min z position (mm)

gripper:
  #communication
  device_identifiers:
      vendorid: "0403" #WINDOWS ONLY
      productid: "6015" #WINDOWS ONLY
      location: "" #WINDOWS ONLY
  pollingrate: 0.05 #delay (seconds) between sending a command and reading a response
  timeout: 10 #max time (seconds) allotted to gripper motion before flagging a movement error
  width_max: 14.6  #maximum opening width (mm)
  width_min: 3.25 #minimum opening width (mm)
  pwm_max: 1000  #pulse width (us) corresponding to minimum width
  pwm_min: 650   #pulse width (us) corresponding to maximum width
  extra_opening_width: 2 #extra width (mm) to open gripper when moving to pick up a sample
  # slow_movement_interval: 0.7 #time (s) between intermediate servo setpoints when opening/closing slowly
  slow_interval: 5 #rate (us pwm/ 10 ms) to open at during "slow" setting
  fast_interval: 50 #rate to open at during "fast" setting
  idle_timeout: 30 #gripper idle time (seconds) after which automatically closes. To prevent servo burnout (fighting the spring to stay open)
  springs_loaded_threshold: 725 #if the gripper load reading is below this value, we assume the springs are not applying load onto the gripper fingers (ie sample is clasped)
  catch_attempts: 3 #number of times to try picking up a sample before erroring out
hotplate:
  p0: [100,100,100] #initial guess [x,y,z] coordinates for gantry to center over bottom left corner slot. Safer to overestimate z value here to avoid collisions

liquidhandler:
  pollingrate: 0.05 #delay (seconds) between checks for new commands to push to liquid handler server
  
sampletray:
  p0: [100,100,100] #initial guess [x,y,z] coordinates for gantry to center over bottom left corner slot. Safer to overestimate z value here to avoid collisions

spincoater:
  # communication
  device_identifiers:
    # serialid: #LINUX ONLY "558383339323513140D1" #hardware ID of spincoater arduino. Used to find correct COM port
      vendorid: "TODO" #WINDOWS ONLY
      productid: "TODO" #WINDOWS ONLY
      location: "" #WINDOWS + GANTRY ONLY
  pollingrate: 0.5 #delay (seconds) between communication to the arduino
  # movement
  p0: [52, 126, 41] #initial guess [x,y,z] coordinates for gantry to center over the chuck. Safer to overestimate z value here to avoid collisions
  rpm_max: 9000 #maximum angular velocity (rpm) the spincoater can hit
  rpm_min: 1000 #minimum angular velocity (rpm) the spincoater can hit
  acceleration_max: 5000 #maximum angular acceleration (rpm/s) the spincoater can hit
  acceleration_min: 50 #maximum angular acceleration (rpm/s) the spincoater can hit


characterizationline:
  #movement
  axis:
    device_identifiers:
    # serialid: TODO
      vendorid: "1EAF" #WINDOWS ONLY
      productid: "0004" #WINDOWS ONLY
      location: "1-13.4.1.3" #WINDOWS
    pollingrate: 0.05
    timeout: 15 #max time (seconds) to allow movement before flagging an error
    positiontolerance: 0.05 #tolerance (mm) for movements to be considered complete
    x_max: 400.0 #max x position (mm)
    x_min: 0     #min x position (mm)
  #individual stations
  darkfield:
    cameraid: 12316 #serial number for Thorlabs Camera
    position: 88.15 #position (mm) at which characterization axis centers sample in FOV
    switchindex: 0 #switchbox plug index for light source (ring light)
  pl_imaging:
    # cameraid: SAME AS DARKFIELD, NO NEED TO INPUT HERE #serial number for Thorlabs Camera #same camera as darkfield
    position: 88.15 #position (mm) at which characterization axis centers sample in FOV
    switchindex: 1 #switchbox plug index for light source (blue LED lamp)
  brightfield:
    cameraid: 12519 #serial number for Thorlabs Camera
    position: 222.5 #position (mm) at which characterization axis centers sample in FOV
    switchindex: 2 #switchbox plug index for light source (ring light)
  pl: #spectroscopy
    position: 313 #position (mm) at which characterization axis centers sample in FOV
    switchindex: 3 #switchbox plug index for light source (red laser)
  transmission: #spectroscopy
    position: 313 #position (mm) at which characterization axis centers sample in FOV
    switchindex: 4 #switchbox plug index for light source (lamp shutter)

  
  